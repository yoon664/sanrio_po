<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
    body {
          margin: 0;
          padding: 0;
          overflow-x: hidden;
      }
      
    .characters-scroll {
    height: 100vh;
    overflow: hidden;
    position: sticky;
    top: 0;
    z-index: 10;
}
  
.characters-scroll h2 {
    font-family: "Bagel Fat One", system-ui;
    text-align: center;
    font-size: 40px;
    margin-bottom: 50px;
    padding: 50px 0;
    color: #f44588;
}
  
.scroll-wrapper {
    display: flex;
    /* overflow-x: hidden; */ /* 이 속성 제거 */
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    gap: 32px;
    padding-bottom: 20px;
    width: max-content; /* 자동으로 자식 요소 너비에 맞춰짐 */
    /* width: 100vw; */
    max-width: 100%;
    position: relative; /* 위치 지정 */
    padding-left: 5%; /* 시작 위치 조정 */
    padding-right: 5%; /* 끝 위치 조정 */

    will-change: transform;
    transition: transform 0.1s ease-out;
}  
  
.character-card {
    position: relative;
    overflow: hidden;
    background: #fff;
    min-width: 600px;
    height: 650px;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, background-color 0.3s ease; /* 전환 효과 추가 */
    border-radius: 30px;
}

.character-card h3 {
    margin-bottom: 20px;
} 

.character-card p {
    opacity: 0;
    font-size: 20px;
    transition: opacity 0.3s ease, transform 0.3s ease;
    transform: translateY(20px); /* 초기 위치 조정 추가 */
}

.character-card:hover p {
    opacity: 1;
    transform: translateY(0); 
}
  
.character-card:hover {
    transform: translateY(-1px);
    color: white;
    opacity: 1;
}

.character-card.kitty:hover {background-color: #e03b4b;}
.character-card.cinamon:hover {background-color: #bcecff;}
.character-card.melody:hover {background-color: #ffcade;}
.character-card.pompom:hover {background-color: #ffe783;}
.character-card.kuromi:hover {background-color: #9c9b9b;}
.character-card.pochacco:hover {background-color: #bce8e8;}
.character-card.twin:hover {background-color: #c1bdf4;}

.char-info {
    position: absolute;
    text-align: center;
    top: 80%; /* 130%에서 수정 */
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%; /* 너비 추가 */
}

.char-info h3 {
    text-align: center;
    font-size: 25px;
}
  
.char-image {
    position: relative;
    width: 80%;
    height: 60%;
    display: block;
    margin: auto;
    margin-top: 10%; /* 간격 추가 */
}
  
.char-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    position: absolute;
    top: 0;
    left: 0;
    transition: opacity 0.3s ease;
}

.img-default {
    opacity: 1;
}

.img-hover {
    opacity: 0;
}

.character-card:hover .img-default {
    opacity: 0;
}

.character-card:hover .img-hover {
    opacity: 1;
}
.scroll-sections {
  display: flex;
  height: 100%;
  transition: transform 0.1s ease-out;
}
.section {
  flex-shrink: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  color: white;
}

    </style>
</head>
<body>
  <div class="section" style="background-color: hsl(0, 70%, 50%)">SECTION 1</div>
    <!-- 가로 스크롤!!!! -->
<section class="characters-scroll">
  <h2>❤︎❤︎  SANRIO CHARACTERS ❤︎❤︎</h2>
  <div class="scroll-wrapper">
    <div class="character-card kitty">
      <div class="char-image">
        <img src="img/scroll/kitty1.png" alt="Hello Kitty" class="img-default">
        <img src="img/scroll/kitty2.png" alt="Hello Kitty hover" class="img-hover">
      </div>
      <div class="char-info">
        <h3>HELLO KITTY</h3>
        <p>밝고 상냥한 고양이</p>
      </div>
    </div>
    
    <div class="character-card cinamon">
      <div class="char-image">
        <img src="img/scroll/cinamon1.png" alt="cinamon" class="img-default">
        <img src="img/scroll/cinamon2.png" alt="cinamon hover" class="img-hover">
      </div>
      <div class="char-info">
        <h3>CINNAMOROLL</h3>
        <p>하늘을 나는 귀여운 강아지</p>
      </div>
    </div>
    
    <div class="character-card melody">
      <div class="char-image">
        <img src="img/scroll/melody1.png" alt="My Melody" class="img-default">
        <img src="img/scroll/melody2.png" alt="My Melody hover" class="img-hover">
      </div>
      <div class="char-info">
        <h3>MY MELODY</h3>
        <p>핑크 후드를 쓴 상냥하고 귀여운 토끼친구</p>
      </div>
    </div>
    
    <div class="character-card pompom">
      <div class="char-image">
        <img src="img/scroll/pompom1.png" alt="Pompompurin" class="img-default">
        <img src="img/scroll/pompom2.png" alt="Pompompurin hover" class="img-hover">
      </div>
      <div class="char-info">
        <h3>POMPOMPURIN</h3>
        <p>노란 푸딩처럼 부드러운 골든리트리버</p>
      </div>
    </div>
    
    <div class="character-card kuromi">
      <div class="char-image">
        <img src="img/scroll/KUROMI1.png" alt="Kuromi" class="img-default">
        <img src="img/scroll/KUROMI2.png" alt="Kuromi hover" class="img-hover">
      </div>
      <div class="char-info">
        <h3>KUROMI</h3>
        <p>자칭 마이 멜로디의 라이벌</p>
      </div>
    </div>
    
    <div class="character-card pochacco">
      <div class="char-image">
        <img src="img/scroll/pochacco1.png" alt="Pochacco" class="img-default">
        <img src="img/scroll/pochacco2.png" alt="Pochacco hover" class="img-hover">
      </div>
      <div class="char-info">
        <h3>POCHACCO</h3>
        <p>산책을 좋아하는 귀여운 강아지</p>
      </div>
    </div>
    
    <div class="character-card twin">
      <div class="char-image">
        <img src="img/scroll/twin1.png" alt="Little Twin Stars" class="img-default">
        <img src="img/scroll/twin2.png" alt="Little Twin Stars hover" class="img-hover">
      </div>
      <div class="char-info">
        <h3>LITTLE TWIN STARS</h3>
        <p>별나라에서 온 쌍둥이 남매, 키키 & 라라</p>
      </div>
    </div>
  </div>
</section>

<div class="section" style="background-color: hsl(100, 70%, 50%)">SECTION 2</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const container = document.querySelector(".characters-scroll");
  const scrollWrapper = document.querySelector(".scroll-wrapper");
  let isScrollingHorizontally = false;
  let lastScrollY = window.scrollY;
  let scrollTimeout;

  // 초기 위치 설정
  if (container && scrollWrapper) {
    scrollWrapper.style.transform = `translateX(0px)`;
  }

  const updateScroll = () => {
    if (!container || !scrollWrapper) return;

    const scrollY = window.scrollY;
    const containerRect = container.getBoundingClientRect();
    const containerTop = window.pageYOffset + containerRect.top;
    const containerHeight = container.offsetHeight;
    const windowHeight = window.innerHeight;
    
    // 컨테이너 내부인지 확인
    const isInContainer = scrollY >= containerTop && 
                          scrollY < containerTop + containerHeight - windowHeight;
    
    if (isInContainer) {
      // 진행도 계산 (0-1 사이 값)
      const progress = Math.min(1, Math.max(0, (scrollY - containerTop) / (containerHeight - windowHeight)));
      
      // 실제 스크롤할 수 있는 최대 너비
      const totalScrollWidth = scrollWrapper.scrollWidth - window.innerWidth + 100;
      
      // 변환 적용
      const translateX = progress * totalScrollWidth;
      scrollWrapper.style.transform = `translateX(-${translateX}px)`;
      
      // 가로 스크롤이 완료되지 않았다면 세로 스크롤 방지
      if (progress < 0.99) {
        // 이전 스크롤 위치로 되돌림
        if (Math.abs(scrollY - lastScrollY) > 5) { // 작은 스크롤 무시
          window.scrollTo(0, containerTop + progress * (containerHeight - windowHeight));
        }
      }
    }
    
    lastScrollY = window.scrollY;
  };

  // 스크롤 이벤트 처리 (쓰로틀링 적용)
  const handleScroll = () => {
    if (!isScrollingHorizontally) {
      isScrollingHorizontally = true;
      
      updateScroll();
      
      // 스크롤 이벤트 간 딜레이 설정 (성능 최적화)
      clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(() => {
        isScrollingHorizontally = false;
      }, 50);
    }
  };

  // 초기 실행
  setTimeout(updateScroll, 100);
  
  // 이벤트 리스너
  window.addEventListener("scroll", handleScroll, { passive: true });
  window.addEventListener("resize", () => {
    setTimeout(updateScroll, 100);
  });
});
</script>
</body>
</html>